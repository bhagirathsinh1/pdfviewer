{
    "sourceFile": "lib/MainPages/searchpage/search_list.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 21,
            "patches": [
                {
                    "date": 1642404771875,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1642404902991,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -154,8 +154,11 @@\n             if (!data.isEmpty) {\r\n               try {\r\n                 await RecentSQLPDFService()\r\n                     .insertRecentPDF(data, SqlModel.tableRecent);\r\n+\r\n+                Provider.of<PdfFileService>(context, listen: false)\r\n+                    .getRecentPdfList();\r\n               } catch (e) {\r\n                 ScaffoldMessenger.of(context).clearSnackBars();\r\n                 ScaffoldMessenger.of(context).showSnackBar(\r\n                   SnackBar(\r\n@@ -170,10 +173,11 @@\n             Navigator.push(\r\n               context,\r\n               MaterialPageRoute(\r\n                 builder: (context) {\r\n-                  return ViewPDF(pdfmodel: pdfservice.files[widget.index]);\r\n-                  //open viewPDF page on click\r\n+                  return ViewPDF(\r\n+                    pdfmodel: pdfservice.files[index],\r\n+                  );\r\n                 },\r\n               ),\r\n             );\r\n           },\r\n"
                },
                {
                    "date": 1642404928519,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -174,9 +174,9 @@\n               context,\r\n               MaterialPageRoute(\r\n                 builder: (context) {\r\n                   return ViewPDF(\r\n-                    pdfmodel: pdfservice.files[index],\r\n+                    pdfmodel: pdfservice.files[widget.index],\r\n                   );\r\n                 },\r\n               ),\r\n             );\r\n"
                },
                {
                    "date": 1642405032837,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -23,9 +23,10 @@\n class _SearchListState extends State<SearchList> {\r\n   @override\r\n   Widget build(BuildContext context) {\r\n     return Consumer<PdfFileService>(builder: (context, pdfservice, child) {\r\n-      var filePath = pdfservice.files[widget.index].pdfpath.toString();\r\n+      var fileIndex = pdfservice.files[index];\r\n+      var filePath = fileIndex.pdfpath.toString();\r\n       var fileDate = pdfservice.files[widget.index].date.toString();\r\n       var fileSize = pdfservice.files[widget.index].size.toString();\r\n \r\n       var isfav = pdfservice.favoritePdfList.where((element) =>\r\n"
                },
                {
                    "date": 1642405153187,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -23,10 +23,9 @@\n class _SearchListState extends State<SearchList> {\r\n   @override\r\n   Widget build(BuildContext context) {\r\n     return Consumer<PdfFileService>(builder: (context, pdfservice, child) {\r\n-      var fileIndex = pdfservice.files[index];\r\n-      var filePath = fileIndex.pdfpath.toString();\r\n+      var filePath = pdfservice.files[widget.index].pdfpath.toString();\r\n       var fileDate = pdfservice.files[widget.index].date.toString();\r\n       var fileSize = pdfservice.files[widget.index].size.toString();\r\n \r\n       var isfav = pdfservice.favoritePdfList.where((element) =>\r\n"
                },
                {
                    "date": 1642405233198,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,8 @@\n import 'dart:io';\r\n \r\n import 'package:flutter/material.dart';\r\n+import 'package:pdfviewer/MainPages/homepage/addremove_widget.dart';\r\n import 'package:pdfviewer/SQLService/recent_pdf_service.dart';\r\n import 'package:pdfviewer/SQLService/sqlService.dart';\r\n import 'package:pdfviewer/model/pdf_list_model.dart';\r\n import 'package:pdfviewer/service/pdf_file_service.dart';\r\n@@ -83,49 +84,9 @@\n                             ShareFiles(\r\n                               fileName: filePath,\r\n                               index: widget.index,\r\n                             ),\r\n-                            ListTile(\r\n-                              title: !isfav.isEmpty\r\n-                                  ? Text(\r\n-                                      \"Remove from favorite\",\r\n-                                      style: TextStyle(\r\n-                                        color: Colors.black.withOpacity(0.8),\r\n-                                      ),\r\n-                                    )\r\n-                                  : Text(\r\n-                                      \"Add to favorite\",\r\n-                                      style: TextStyle(\r\n-                                        color: Colors.black.withOpacity(0.8),\r\n-                                      ),\r\n-                                    ),\r\n-                              leading: !isfav.isEmpty\r\n-                                  ? Icon(\r\n-                                      Icons.star_border,\r\n-                                      color: Colors.black.withOpacity(0.5),\r\n-                                    )\r\n-                                  : Icon(\r\n-                                      Icons.star,\r\n-                                      color: Colors.black.withOpacity(0.5),\r\n-                                    ),\r\n-                              onTap: () async {\r\n-                                print(\"------------------$filePath-------\");\r\n-                                if (!isfav.isEmpty) {\r\n-                                  pdfservice\r\n-                                      .removeFromFavoritePdfList(\r\n-                                          filePath.toString(),\r\n-                                          SqlModel.tableFavorite)\r\n-                                      .whenComplete(\r\n-                                          () => Navigator.pop(context));\r\n-                                } else {\r\n-                                  pdfservice\r\n-                                      .insertIntoFavoritePdfList(\r\n-                                          filePath, SqlModel.tableFavorite)\r\n-                                      .whenComplete(\r\n-                                          () => Navigator.pop(context));\r\n-                                }\r\n-                              },\r\n-                            ),\r\n+                            AddRemoveWidget(paths: filePath),\r\n                             RenameFileWidget(\r\n                               index: widget.index,\r\n                               fileName: filePath,\r\n                             ),\r\n"
                },
                {
                    "date": 1642405314643,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,8 +9,9 @@\n import 'package:pdfviewer/widget/CommonWidget/delete_file_widget.dart';\r\n import 'package:pdfviewer/widget/CommonWidget/page_view.dart';\r\n import 'package:pdfviewer/widget/CommonWidget/rename_files_widget.dart';\r\n import 'package:pdfviewer/widget/CommonWidget/share_file_widget.dart';\r\n+import 'package:pdfviewer/widget/CommonWidget/title_of_bottomsheetpdf.dart';\r\n import 'package:provider/provider.dart';\r\n \r\n class SearchList extends StatefulWidget {\r\n   SearchList({Key? key, required this.index, required this.items})\r\n@@ -24,12 +25,13 @@\n class _SearchListState extends State<SearchList> {\r\n   @override\r\n   Widget build(BuildContext context) {\r\n     return Consumer<PdfFileService>(builder: (context, pdfservice, child) {\r\n-      var filePath = pdfservice.files[widget.index].pdfpath.toString();\r\n-      var fileDate = pdfservice.files[widget.index].date.toString();\r\n-      var fileSize = pdfservice.files[widget.index].size.toString();\r\n-\r\n+      var fileIndex = pdfservice.files[widget.index];\r\n+      var filePath = fileIndex.pdfpath.toString();\r\n+      var fileDate = fileIndex.date.toString();\r\n+      var fileSize = fileIndex.size.toString();\r\n+      var fileTitle = fileIndex.pdfname.toString();\r\n       var isfav = pdfservice.favoritePdfList.where((element) =>\r\n           element.pdfpath == pdfservice.files[widget.index].pdfpath.toString());\r\n       return Card(\r\n         child: ListTile(\r\n@@ -59,29 +61,9 @@\n                         color: Colors.white,\r\n                         height: 350,\r\n                         child: Column(\r\n                           children: [\r\n-                            Container(\r\n-                              decoration: BoxDecoration(\r\n-                                  color: Colors.yellow[100],\r\n-                                  border: Border.all(\r\n-                                    color: Colors.grey,\r\n-                                    width: 5,\r\n-                                  )),\r\n-                              child: ListTile(\r\n-                                title: Text(\r\n-                                    pdfservice.files[widget.index].pdfname\r\n-                                        .toString(),\r\n-                                    style: TextStyle(\r\n-                                      color: Colors.black.withOpacity(0.8),\r\n-                                    )),\r\n-                                leading: Icon(\r\n-                                  Icons.picture_as_pdf,\r\n-                                  color: Colors.red,\r\n-                                ),\r\n-                                onTap: () {},\r\n-                              ),\r\n-                            ),\r\n+                            TitleOfPdf(titlePath: fileTitle),\r\n                             ShareFiles(\r\n                               fileName: filePath,\r\n                               index: widget.index,\r\n                             ),\r\n"
                },
                {
                    "date": 1642405813119,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,8 +3,9 @@\n import 'package:flutter/material.dart';\r\n import 'package:pdfviewer/MainPages/homepage/addremove_widget.dart';\r\n import 'package:pdfviewer/SQLService/recent_pdf_service.dart';\r\n import 'package:pdfviewer/SQLService/sqlService.dart';\r\n+import 'package:pdfviewer/common%20method/add-into_recents.dart';\r\n import 'package:pdfviewer/model/pdf_list_model.dart';\r\n import 'package:pdfviewer/service/pdf_file_service.dart';\r\n import 'package:pdfviewer/widget/CommonWidget/delete_file_widget.dart';\r\n import 'package:pdfviewer/widget/CommonWidget/page_view.dart';\r\n@@ -89,41 +90,42 @@\n               ),\r\n             ],\r\n           ),\r\n           onTap: () async {\r\n-            Map<String, Object> data = {\r\n-              'recentpdf': (filePath),\r\n-            };\r\n+            AddIntoRecents();\r\n+            // Map<String, Object> data = {\r\n+            //   'recentpdf': (filePath),\r\n+            // };\r\n \r\n-            if (!data.isEmpty) {\r\n-              try {\r\n-                await RecentSQLPDFService()\r\n-                    .insertRecentPDF(data, SqlModel.tableRecent);\r\n+            // if (!data.isEmpty) {\r\n+            //   try {\r\n+            //     await RecentSQLPDFService()\r\n+            //         .insertRecentPDF(data, SqlModel.tableRecent);\r\n \r\n-                Provider.of<PdfFileService>(context, listen: false)\r\n-                    .getRecentPdfList();\r\n-              } catch (e) {\r\n-                ScaffoldMessenger.of(context).clearSnackBars();\r\n-                ScaffoldMessenger.of(context).showSnackBar(\r\n-                  SnackBar(\r\n-                    content: Text(\r\n-                      e.toString(),\r\n-                    ),\r\n-                  ),\r\n-                );\r\n-              }\r\n-              print(\"pdfname is--------------> $data\");\r\n-            }\r\n-            Navigator.push(\r\n-              context,\r\n-              MaterialPageRoute(\r\n-                builder: (context) {\r\n-                  return ViewPDF(\r\n-                    pdfmodel: pdfservice.files[widget.index],\r\n-                  );\r\n-                },\r\n-              ),\r\n-            );\r\n+            //     Provider.of<PdfFileService>(context, listen: false)\r\n+            //         .getRecentPdfList();\r\n+            //   } catch (e) {\r\n+            //     ScaffoldMessenger.of(context).clearSnackBars();\r\n+            //     ScaffoldMessenger.of(context).showSnackBar(\r\n+            //       SnackBar(\r\n+            //         content: Text(\r\n+            //           e.toString(),\r\n+            //         ),\r\n+            //       ),\r\n+            //     );\r\n+            //   }\r\n+            //   print(\"pdfname is--------------> $data\");\r\n+            // }\r\n+            // Navigator.push(\r\n+            //   context,\r\n+            //   MaterialPageRoute(\r\n+            //     builder: (context) {\r\n+            //       return ViewPDF(\r\n+            //         pdfmodel: pdfservice.files[widget.index],\r\n+            //       );\r\n+            //     },\r\n+            //   ),\r\n+            // );\r\n           },\r\n         ),\r\n       );\r\n     });\r\n"
                },
                {
                    "date": 1642405824906,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,9 +3,8 @@\n import 'package:flutter/material.dart';\r\n import 'package:pdfviewer/MainPages/homepage/addremove_widget.dart';\r\n import 'package:pdfviewer/SQLService/recent_pdf_service.dart';\r\n import 'package:pdfviewer/SQLService/sqlService.dart';\r\n-import 'package:pdfviewer/common%20method/add-into_recents.dart';\r\n import 'package:pdfviewer/model/pdf_list_model.dart';\r\n import 'package:pdfviewer/service/pdf_file_service.dart';\r\n import 'package:pdfviewer/widget/CommonWidget/delete_file_widget.dart';\r\n import 'package:pdfviewer/widget/CommonWidget/page_view.dart';\r\n@@ -90,42 +89,41 @@\n               ),\r\n             ],\r\n           ),\r\n           onTap: () async {\r\n-            AddIntoRecents();\r\n-            // Map<String, Object> data = {\r\n-            //   'recentpdf': (filePath),\r\n-            // };\r\n+            Map<String, Object> data = {\r\n+              'recentpdf': (filePath),\r\n+            };\r\n \r\n-            // if (!data.isEmpty) {\r\n-            //   try {\r\n-            //     await RecentSQLPDFService()\r\n-            //         .insertRecentPDF(data, SqlModel.tableRecent);\r\n+            if (!data.isEmpty) {\r\n+              try {\r\n+                await RecentSQLPDFService()\r\n+                    .insertRecentPDF(data, SqlModel.tableRecent);\r\n \r\n-            //     Provider.of<PdfFileService>(context, listen: false)\r\n-            //         .getRecentPdfList();\r\n-            //   } catch (e) {\r\n-            //     ScaffoldMessenger.of(context).clearSnackBars();\r\n-            //     ScaffoldMessenger.of(context).showSnackBar(\r\n-            //       SnackBar(\r\n-            //         content: Text(\r\n-            //           e.toString(),\r\n-            //         ),\r\n-            //       ),\r\n-            //     );\r\n-            //   }\r\n-            //   print(\"pdfname is--------------> $data\");\r\n-            // }\r\n-            // Navigator.push(\r\n-            //   context,\r\n-            //   MaterialPageRoute(\r\n-            //     builder: (context) {\r\n-            //       return ViewPDF(\r\n-            //         pdfmodel: pdfservice.files[widget.index],\r\n-            //       );\r\n-            //     },\r\n-            //   ),\r\n-            // );\r\n+                Provider.of<PdfFileService>(context, listen: false)\r\n+                    .getRecentPdfList();\r\n+              } catch (e) {\r\n+                ScaffoldMessenger.of(context).clearSnackBars();\r\n+                ScaffoldMessenger.of(context).showSnackBar(\r\n+                  SnackBar(\r\n+                    content: Text(\r\n+                      e.toString(),\r\n+                    ),\r\n+                  ),\r\n+                );\r\n+              }\r\n+              print(\"pdfname is--------------> $data\");\r\n+            }\r\n+            Navigator.push(\r\n+              context,\r\n+              MaterialPageRoute(\r\n+                builder: (context) {\r\n+                  return ViewPDF(\r\n+                    pdfmodel: pdfservice.files[widget.index],\r\n+                  );\r\n+                },\r\n+              ),\r\n+            );\r\n           },\r\n         ),\r\n       );\r\n     });\r\n"
                },
                {
                    "date": 1642406013656,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -89,41 +89,9 @@\n               ),\r\n             ],\r\n           ),\r\n           onTap: () async {\r\n-            Map<String, Object> data = {\r\n-              'recentpdf': (filePath),\r\n-            };\r\n-\r\n-            if (!data.isEmpty) {\r\n-              try {\r\n-                await RecentSQLPDFService()\r\n-                    .insertRecentPDF(data, SqlModel.tableRecent);\r\n-\r\n-                Provider.of<PdfFileService>(context, listen: false)\r\n-                    .getRecentPdfList();\r\n-              } catch (e) {\r\n-                ScaffoldMessenger.of(context).clearSnackBars();\r\n-                ScaffoldMessenger.of(context).showSnackBar(\r\n-                  SnackBar(\r\n-                    content: Text(\r\n-                      e.toString(),\r\n-                    ),\r\n-                  ),\r\n-                );\r\n-              }\r\n-              print(\"pdfname is--------------> $data\");\r\n-            }\r\n-            Navigator.push(\r\n-              context,\r\n-              MaterialPageRoute(\r\n-                builder: (context) {\r\n-                  return ViewPDF(\r\n-                    pdfmodel: pdfservice.files[widget.index],\r\n-                  );\r\n-                },\r\n-              ),\r\n-            );\r\n+            AddIntoRecents().addIntoRecentsMethod(filePath, context, fileIndex);\r\n           },\r\n         ),\r\n       );\r\n     });\r\n"
                },
                {
                    "date": 1642407204554,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -89,9 +89,41 @@\n               ),\r\n             ],\r\n           ),\r\n           onTap: () async {\r\n-            AddIntoRecents().addIntoRecentsMethod(filePath, context, fileIndex);\r\n+            Map<String, Object> data = {\r\n+              'recentpdf': (filePath),\r\n+            };\r\n+\r\n+            if (!data.isEmpty) {\r\n+              try {\r\n+                await RecentSQLPDFService()\r\n+                    .insertRecentPDF(data, SqlModel.tableRecent);\r\n+\r\n+                Provider.of<PdfFileService>(context, listen: false)\r\n+                    .getRecentPdfList();\r\n+              } catch (e) {\r\n+                ScaffoldMessenger.of(context).clearSnackBars();\r\n+                ScaffoldMessenger.of(context).showSnackBar(\r\n+                  SnackBar(\r\n+                    content: Text(\r\n+                      e.toString(),\r\n+                    ),\r\n+                  ),\r\n+                );\r\n+              }\r\n+              print(\"pdfname is--------------> $data\");\r\n+            }\r\n+            Navigator.push(\r\n+              context,\r\n+              MaterialPageRoute(\r\n+                builder: (context) {\r\n+                  return ViewPDF(\r\n+                    pdfmodel: pdfservice.files[widget.index],\r\n+                  );\r\n+                },\r\n+              ),\r\n+            );\r\n           },\r\n         ),\r\n       );\r\n     });\r\n"
                },
                {
                    "date": 1642485658507,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -68,11 +68,14 @@\n                               index: widget.index,\r\n                             ),\r\n                             AddRemoveWidget(paths: filePath),\r\n                             RenameFileWidget(\r\n-                              index: widget.index,\r\n-                              fileName: filePath,\r\n-                            ),\r\n+                                index: widget.index,\r\n+                                fileName: filePath,\r\n+                                callback: (String newFileName) {\r\n+                                  pdfservice.changeFileNameOnly(\r\n+                                      context, newFileName, widget.index);\r\n+                                }),\r\n                             DeleteFileWidget(\r\n                               index: widget.index,\r\n                               fileName: filePath,\r\n                             ),\r\n"
                },
                {
                    "date": 1642492262218,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -64,9 +64,8 @@\n                           children: [\r\n                             TitleOfPdf(titlePath: fileTitle),\r\n                             ShareFiles(\r\n                               fileName: filePath,\r\n-                              index: widget.index,\r\n                             ),\r\n                             AddRemoveWidget(paths: filePath),\r\n                             RenameFileWidget(\r\n                                 index: widget.index,\r\n"
                },
                {
                    "date": 1642492380719,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -74,9 +74,8 @@\n                                   pdfservice.changeFileNameOnly(\r\n                                       context, newFileName, widget.index);\r\n                                 }),\r\n                             DeleteFileWidget(\r\n-                              index: widget.index,\r\n                               fileName: filePath,\r\n                             ),\r\n                           ],\r\n                         ),\r\n"
                },
                {
                    "date": 1642493117603,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -67,9 +67,8 @@\n                               fileName: filePath,\r\n                             ),\r\n                             AddRemoveWidget(paths: filePath),\r\n                             RenameFileWidget(\r\n-                                index: widget.index,\r\n                                 fileName: filePath,\r\n                                 callback: (String newFileName) {\r\n                                   pdfservice.changeFileNameOnly(\r\n                                       context, newFileName, widget.index);\r\n"
                },
                {
                    "date": 1642565576718,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -117,10 +117,13 @@\n               context,\r\n               MaterialPageRoute(\r\n                 builder: (context) {\r\n                   return ViewPDF(\r\n-                    pdfmodel: pdfservice.files[widget.index],\r\n-                  );\r\n+                      pdfmodel: pdfservice.files[widget.index],\r\n+                      callback: (String newFileName) {\r\n+                        pdfservice.changeFileNameOnly(\r\n+                            context, newFileName, widget.index);\r\n+                      });\r\n                 },\r\n               ),\r\n             );\r\n           },\r\n"
                },
                {
                    "date": 1642567661212,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,8 +3,9 @@\n import 'package:flutter/material.dart';\r\n import 'package:pdfviewer/MainPages/homepage/addremove_widget.dart';\r\n import 'package:pdfviewer/SQLService/recent_pdf_service.dart';\r\n import 'package:pdfviewer/SQLService/sqlService.dart';\r\n+import 'package:pdfviewer/common%20mehtod/addIntoRecentMethod.dart';\r\n import 'package:pdfviewer/model/pdf_list_model.dart';\r\n import 'package:pdfviewer/service/pdf_file_service.dart';\r\n import 'package:pdfviewer/widget/CommonWidget/delete_file_widget.dart';\r\n import 'package:pdfviewer/widget/CommonWidget/page_view.dart';\r\n@@ -89,31 +90,9 @@\n               ),\r\n             ],\r\n           ),\r\n           onTap: () async {\r\n-            Map<String, Object> data = {\r\n-              'recentpdf': (filePath),\r\n-            };\r\n-\r\n-            if (!data.isEmpty) {\r\n-              try {\r\n-                await RecentSQLPDFService()\r\n-                    .insertRecentPDF(data, SqlModel.tableRecent);\r\n-\r\n-                Provider.of<PdfFileService>(context, listen: false)\r\n-                    .getRecentPdfList();\r\n-              } catch (e) {\r\n-                ScaffoldMessenger.of(context).clearSnackBars();\r\n-                ScaffoldMessenger.of(context).showSnackBar(\r\n-                  SnackBar(\r\n-                    content: Text(\r\n-                      e.toString(),\r\n-                    ),\r\n-                  ),\r\n-                );\r\n-              }\r\n-              print(\"pdfname is--------------> $data\");\r\n-            }\r\n+            AddIntoRecentsMethod().addIntoRecents(filePath, context);\r\n             Navigator.push(\r\n               context,\r\n               MaterialPageRoute(\r\n                 builder: (context) {\r\n"
                },
                {
                    "date": 1642568370969,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,10 +1,7 @@\n-import 'dart:io';\r\n-\r\n import 'package:flutter/material.dart';\r\n import 'package:pdfviewer/MainPages/homepage/addremove_widget.dart';\r\n-import 'package:pdfviewer/SQLService/recent_pdf_service.dart';\r\n-import 'package:pdfviewer/SQLService/sqlService.dart';\r\n+\r\n import 'package:pdfviewer/common%20mehtod/addIntoRecentMethod.dart';\r\n import 'package:pdfviewer/model/pdf_list_model.dart';\r\n import 'package:pdfviewer/service/pdf_file_service.dart';\r\n import 'package:pdfviewer/widget/CommonWidget/delete_file_widget.dart';\r\n"
                },
                {
                    "date": 1642568388170,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,4 +1,6 @@\n+// ignore_for_file: must_be_immutable\r\n+\r\n import 'package:flutter/material.dart';\r\n import 'package:pdfviewer/MainPages/homepage/addremove_widget.dart';\r\n \r\n import 'package:pdfviewer/common%20mehtod/addIntoRecentMethod.dart';\r\n"
                },
                {
                    "date": 1642571331728,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,8 +3,9 @@\n import 'package:flutter/material.dart';\r\n import 'package:pdfviewer/MainPages/homepage/addremove_widget.dart';\r\n \r\n import 'package:pdfviewer/common%20mehtod/addIntoRecentMethod.dart';\r\n+import 'package:pdfviewer/common%20mehtod/navigate_to_viewpdf.dart';\r\n import 'package:pdfviewer/model/pdf_list_model.dart';\r\n import 'package:pdfviewer/service/pdf_file_service.dart';\r\n import 'package:pdfviewer/widget/CommonWidget/delete_file_widget.dart';\r\n import 'package:pdfviewer/widget/CommonWidget/page_view.dart';\r\n@@ -103,8 +104,13 @@\n                       });\r\n                 },\r\n               ),\r\n             );\r\n+            NavigateToViewPdf().navigateToViewPdf(\r\n+                pdfservice.files[widget.index],\r\n+                pdfservice,\r\n+                context,\r\n+                widget.index);\r\n           },\r\n         ),\r\n       );\r\n     });\r\n"
                },
                {
                    "date": 1642571338069,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -91,21 +91,9 @@\n             ],\r\n           ),\r\n           onTap: () async {\r\n             AddIntoRecentsMethod().addIntoRecents(filePath, context);\r\n-            Navigator.push(\r\n-              context,\r\n-              MaterialPageRoute(\r\n-                builder: (context) {\r\n-                  return ViewPDF(\r\n-                      pdfmodel: pdfservice.files[widget.index],\r\n-                      callback: (String newFileName) {\r\n-                        pdfservice.changeFileNameOnly(\r\n-                            context, newFileName, widget.index);\r\n-                      });\r\n-                },\r\n-              ),\r\n-            );\r\n+\r\n             NavigateToViewPdf().navigateToViewPdf(\r\n                 pdfservice.files[widget.index],\r\n                 pdfservice,\r\n                 context,\r\n"
                },
                {
                    "date": 1642579363781,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,15 +26,17 @@\n class _SearchListState extends State<SearchList> {\r\n   @override\r\n   Widget build(BuildContext context) {\r\n     return Consumer<PdfFileService>(builder: (context, pdfservice, child) {\r\n-      var fileIndex = pdfservice.files[widget.index];\r\n-      var filePath = fileIndex.pdfpath.toString();\r\n-      var fileDate = fileIndex.date.toString();\r\n-      var fileSize = fileIndex.size.toString();\r\n-      var fileTitle = fileIndex.pdfname.toString();\r\n-      var isfav = pdfservice.favoritePdfList.where((element) =>\r\n-          element.pdfpath == pdfservice.files[widget.index].pdfpath.toString());\r\n+      PdfListModel fileIndex = pdfservice.files[widget.index];\r\n+      String filePath = fileIndex.pdfpath.toString();\r\n+      String fileDate = fileIndex.date.toString();\r\n+      String fileSize = fileIndex.size.toString();\r\n+      String fileTitle = fileIndex.pdfname.toString();\r\n+      Iterable<PdfListModel> isfav = pdfservice.favoritePdfList.where(\r\n+          (element) =>\r\n+              element.pdfpath ==\r\n+              pdfservice.files[widget.index].pdfpath.toString());\r\n       return Card(\r\n         child: ListTile(\r\n           title: Text(\r\n             widget.items[widget.index].pdfname.toString(),\r\n@@ -91,9 +93,8 @@\n             ],\r\n           ),\r\n           onTap: () async {\r\n             AddIntoRecentsMethod().addIntoRecents(filePath, context);\r\n-\r\n             NavigateToViewPdf().navigateToViewPdf(\r\n                 pdfservice.files[widget.index],\r\n                 pdfservice,\r\n                 context,\r\n"
                }
            ],
            "date": 1642404771875,
            "name": "Commit-0",
            "content": "import 'dart:io';\r\n\r\nimport 'package:flutter/material.dart';\r\nimport 'package:pdfviewer/SQLService/recent_pdf_service.dart';\r\nimport 'package:pdfviewer/SQLService/sqlService.dart';\r\nimport 'package:pdfviewer/model/pdf_list_model.dart';\r\nimport 'package:pdfviewer/service/pdf_file_service.dart';\r\nimport 'package:pdfviewer/widget/CommonWidget/delete_file_widget.dart';\r\nimport 'package:pdfviewer/widget/CommonWidget/page_view.dart';\r\nimport 'package:pdfviewer/widget/CommonWidget/rename_files_widget.dart';\r\nimport 'package:pdfviewer/widget/CommonWidget/share_file_widget.dart';\r\nimport 'package:provider/provider.dart';\r\n\r\nclass SearchList extends StatefulWidget {\r\n  SearchList({Key? key, required this.index, required this.items})\r\n      : super(key: key);\r\n  int index;\r\n  List<PdfListModel> items = [];\r\n  @override\r\n  _SearchListState createState() => _SearchListState();\r\n}\r\n\r\nclass _SearchListState extends State<SearchList> {\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Consumer<PdfFileService>(builder: (context, pdfservice, child) {\r\n      var filePath = pdfservice.files[widget.index].pdfpath.toString();\r\n      var fileDate = pdfservice.files[widget.index].date.toString();\r\n      var fileSize = pdfservice.files[widget.index].size.toString();\r\n\r\n      var isfav = pdfservice.favoritePdfList.where((element) =>\r\n          element.pdfpath == pdfservice.files[widget.index].pdfpath.toString());\r\n      return Card(\r\n        child: ListTile(\r\n          title: Text(\r\n            widget.items[widget.index].pdfname.toString(),\r\n          ),\r\n          subtitle: fileSize.length < 7\r\n              ? Text(\"${fileDate}\\n${fileSize} Kb\")\r\n              : Text(\r\n                  \"${fileDate}\\n${(double.parse(fileSize.toString()) / 1024).toStringAsFixed(2)} Mb\"),\r\n          leading: Icon(\r\n            Icons.picture_as_pdf,\r\n            color: Colors.red,\r\n          ),\r\n          trailing: Wrap(\r\n            children: [\r\n              Icon(\r\n                Icons.star,\r\n                color: !isfav.isEmpty ? Colors.blue : Colors.white,\r\n              ),\r\n              IconButton(\r\n                onPressed: () {\r\n                  showModalBottomSheet<void>(\r\n                    context: context,\r\n                    builder: (BuildContext context) {\r\n                      return Container(\r\n                        color: Colors.white,\r\n                        height: 350,\r\n                        child: Column(\r\n                          children: [\r\n                            Container(\r\n                              decoration: BoxDecoration(\r\n                                  color: Colors.yellow[100],\r\n                                  border: Border.all(\r\n                                    color: Colors.grey,\r\n                                    width: 5,\r\n                                  )),\r\n                              child: ListTile(\r\n                                title: Text(\r\n                                    pdfservice.files[widget.index].pdfname\r\n                                        .toString(),\r\n                                    style: TextStyle(\r\n                                      color: Colors.black.withOpacity(0.8),\r\n                                    )),\r\n                                leading: Icon(\r\n                                  Icons.picture_as_pdf,\r\n                                  color: Colors.red,\r\n                                ),\r\n                                onTap: () {},\r\n                              ),\r\n                            ),\r\n                            ShareFiles(\r\n                              fileName: filePath,\r\n                              index: widget.index,\r\n                            ),\r\n                            ListTile(\r\n                              title: !isfav.isEmpty\r\n                                  ? Text(\r\n                                      \"Remove from favorite\",\r\n                                      style: TextStyle(\r\n                                        color: Colors.black.withOpacity(0.8),\r\n                                      ),\r\n                                    )\r\n                                  : Text(\r\n                                      \"Add to favorite\",\r\n                                      style: TextStyle(\r\n                                        color: Colors.black.withOpacity(0.8),\r\n                                      ),\r\n                                    ),\r\n                              leading: !isfav.isEmpty\r\n                                  ? Icon(\r\n                                      Icons.star_border,\r\n                                      color: Colors.black.withOpacity(0.5),\r\n                                    )\r\n                                  : Icon(\r\n                                      Icons.star,\r\n                                      color: Colors.black.withOpacity(0.5),\r\n                                    ),\r\n                              onTap: () async {\r\n                                print(\"------------------$filePath-------\");\r\n                                if (!isfav.isEmpty) {\r\n                                  pdfservice\r\n                                      .removeFromFavoritePdfList(\r\n                                          filePath.toString(),\r\n                                          SqlModel.tableFavorite)\r\n                                      .whenComplete(\r\n                                          () => Navigator.pop(context));\r\n                                } else {\r\n                                  pdfservice\r\n                                      .insertIntoFavoritePdfList(\r\n                                          filePath, SqlModel.tableFavorite)\r\n                                      .whenComplete(\r\n                                          () => Navigator.pop(context));\r\n                                }\r\n                              },\r\n                            ),\r\n                            RenameFileWidget(\r\n                              index: widget.index,\r\n                              fileName: filePath,\r\n                            ),\r\n                            DeleteFileWidget(\r\n                              index: widget.index,\r\n                              fileName: filePath,\r\n                            ),\r\n                          ],\r\n                        ),\r\n                      );\r\n                    },\r\n                  );\r\n                },\r\n                icon: Icon(\r\n                  Icons.more_vert,\r\n                  color: Colors.redAccent,\r\n                ),\r\n              ),\r\n            ],\r\n          ),\r\n          onTap: () async {\r\n            Map<String, Object> data = {\r\n              'recentpdf': (filePath),\r\n            };\r\n\r\n            if (!data.isEmpty) {\r\n              try {\r\n                await RecentSQLPDFService()\r\n                    .insertRecentPDF(data, SqlModel.tableRecent);\r\n              } catch (e) {\r\n                ScaffoldMessenger.of(context).clearSnackBars();\r\n                ScaffoldMessenger.of(context).showSnackBar(\r\n                  SnackBar(\r\n                    content: Text(\r\n                      e.toString(),\r\n                    ),\r\n                  ),\r\n                );\r\n              }\r\n              print(\"pdfname is--------------> $data\");\r\n            }\r\n            Navigator.push(\r\n              context,\r\n              MaterialPageRoute(\r\n                builder: (context) {\r\n                  return ViewPDF(pdfmodel: pdfservice.files[widget.index]);\r\n                  //open viewPDF page on click\r\n                },\r\n              ),\r\n            );\r\n          },\r\n        ),\r\n      );\r\n    });\r\n  }\r\n}\r\n"
        }
    ]
}