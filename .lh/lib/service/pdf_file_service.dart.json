{
    "sourceFile": "lib/service/pdf_file_service.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 42,
            "patches": [
                {
                    "date": 1642393868052,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1642485379158,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,8 +10,9 @@\n import 'package:pdfviewer/SQLService/recent_pdf_model.dart';\r\n import 'package:pdfviewer/SQLService/sqlService.dart';\r\n import 'package:pdfviewer/model/pdf_list_model.dart';\r\n import 'package:pdfviewer/service/singing_character_enum.dart';\r\n+import 'package:provider/provider.dart';\r\n \r\n class PdfFileService with ChangeNotifier {\r\n   // List starPDF = [];\r\n   bool isDeleted = false;\r\n@@ -313,5 +314,39 @@\n     notifyListeners();\r\n     print(files);\r\n     //update the UI\r\n   }\r\n+\r\n+  changeFileNameOnly(BuildContext context, String newFileName) async {\r\n+    print(\"------------->arrived new name----$newFileName--------\");\r\n+    var providerService = Provider.of<PdfFileService>(context, listen: false);\r\n+    var pdfServiceIndex = providerService.files[2];\r\n+    var temp1 = pdfServiceIndex.referenceFile!.path;\r\n+\r\n+    var lastSeparator = temp1.lastIndexOf(Platform.pathSeparator);\r\n+    var newPath = temp1.substring(0, lastSeparator + 1) + newFileName + \".pdf\";\r\n+    // setState(() {\r\n+    //   isLoading = true;\r\n+    // });\r\n+    var filename = await pdfServiceIndex.referenceFile!.rename(newPath);\r\n+\r\n+    print(\"-------------v.path data---------------- ${filename.path}\");\r\n+\r\n+    pdfServiceIndex.referenceFile = filename;\r\n+    pdfServiceIndex.pdfpath = filename.path;\r\n+\r\n+    pdfServiceIndex.pdfname = filename.path.split('/').last;\r\n+\r\n+    providerService.getStorageFilleMethod();\r\n+\r\n+    Navigator.pop(context);\r\n+    ScaffoldMessenger.of(context).clearSnackBars();\r\n+    ScaffoldMessenger.of(context).showSnackBar(\r\n+      SnackBar(\r\n+        content: Text(\"Renamed to  ${newFileName}\"),\r\n+      ),\r\n+    );\r\n+    // setState(() {\r\n+    //   isLoading = false;\r\n+    // });\r\n+  }\r\n }\r\n"
                },
                {
                    "date": 1642485661930,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -315,12 +315,13 @@\n     print(files);\r\n     //update the UI\r\n   }\r\n \r\n-  changeFileNameOnly(BuildContext context, String newFileName) async {\r\n+  changeFileNameOnly(\r\n+      BuildContext context, String newFileName, int index) async {\r\n     print(\"------------->arrived new name----$newFileName--------\");\r\n     var providerService = Provider.of<PdfFileService>(context, listen: false);\r\n-    var pdfServiceIndex = providerService.files[2];\r\n+    var pdfServiceIndex = providerService.files[index];\r\n     var temp1 = pdfServiceIndex.referenceFile!.path;\r\n \r\n     var lastSeparator = temp1.lastIndexOf(Platform.pathSeparator);\r\n     var newPath = temp1.substring(0, lastSeparator + 1) + newFileName + \".pdf\";\r\n"
                },
                {
                    "date": 1642485851179,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -338,15 +338,15 @@\n     pdfServiceIndex.pdfname = filename.path.split('/').last;\r\n \r\n     providerService.getStorageFilleMethod();\r\n \r\n-    Navigator.pop(context);\r\n-    ScaffoldMessenger.of(context).clearSnackBars();\r\n-    ScaffoldMessenger.of(context).showSnackBar(\r\n-      SnackBar(\r\n-        content: Text(\"Renamed to  ${newFileName}\"),\r\n-      ),\r\n-    );\r\n+    // Navigator.pop(context);\r\n+    // ScaffoldMessenger.of(context).clearSnackBars();\r\n+    // ScaffoldMessenger.of(context).showSnackBar(\r\n+    //   SnackBar(\r\n+    //     content: Text(\"Renamed to  ${newFileName}\"),\r\n+    //   ),\r\n+    // );\r\n     // setState(() {\r\n     //   isLoading = false;\r\n     // });\r\n   }\r\n"
                },
                {
                    "date": 1642485903718,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -337,9 +337,9 @@\n \r\n     pdfServiceIndex.pdfname = filename.path.split('/').last;\r\n \r\n     providerService.getStorageFilleMethod();\r\n-\r\n+    notifyListeners();\r\n     // Navigator.pop(context);\r\n     // ScaffoldMessenger.of(context).clearSnackBars();\r\n     // ScaffoldMessenger.of(context).showSnackBar(\r\n     //   SnackBar(\r\n"
                },
                {
                    "date": 1642485919661,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -339,14 +339,14 @@\n \r\n     providerService.getStorageFilleMethod();\r\n     notifyListeners();\r\n     // Navigator.pop(context);\r\n-    // ScaffoldMessenger.of(context).clearSnackBars();\r\n-    // ScaffoldMessenger.of(context).showSnackBar(\r\n-    //   SnackBar(\r\n-    //     content: Text(\"Renamed to  ${newFileName}\"),\r\n-    //   ),\r\n-    // );\r\n+    ScaffoldMessenger.of(context).clearSnackBars();\r\n+    ScaffoldMessenger.of(context).showSnackBar(\r\n+      SnackBar(\r\n+        content: Text(\"Renamed to  ${newFileName}\"),\r\n+      ),\r\n+    );\r\n     // setState(() {\r\n     //   isLoading = false;\r\n     // });\r\n   }\r\n"
                },
                {
                    "date": 1642486638818,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -318,27 +318,25 @@\n \r\n   changeFileNameOnly(\r\n       BuildContext context, String newFileName, int index) async {\r\n     print(\"------------->arrived new name----$newFileName--------\");\r\n-    var providerService = Provider.of<PdfFileService>(context, listen: false);\r\n-    var pdfServiceIndex = providerService.files[index];\r\n-    var temp1 = pdfServiceIndex.referenceFile!.path;\r\n+    var temp1 = files[index].referenceFile!.path;\r\n \r\n     var lastSeparator = temp1.lastIndexOf(Platform.pathSeparator);\r\n     var newPath = temp1.substring(0, lastSeparator + 1) + newFileName + \".pdf\";\r\n     // setState(() {\r\n     //   isLoading = true;\r\n     // });\r\n-    var filename = await pdfServiceIndex.referenceFile!.rename(newPath);\r\n+    var filename = await files[index].referenceFile!.rename(newPath);\r\n \r\n     print(\"-------------v.path data---------------- ${filename.path}\");\r\n \r\n-    pdfServiceIndex.referenceFile = filename;\r\n-    pdfServiceIndex.pdfpath = filename.path;\r\n+    files[index].referenceFile = filename;\r\n+    files[index].pdfpath = filename.path;\r\n \r\n-    pdfServiceIndex.pdfname = filename.path.split('/').last;\r\n+    files[index].pdfname = filename.path.split('/').last;\r\n \r\n-    providerService.getStorageFilleMethod();\r\n+    getStorageFilleMethod();\r\n     notifyListeners();\r\n     // Navigator.pop(context);\r\n     ScaffoldMessenger.of(context).clearSnackBars();\r\n     ScaffoldMessenger.of(context).showSnackBar(\r\n"
                },
                {
                    "date": 1642486655159,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -325,8 +325,10 @@\n     var newPath = temp1.substring(0, lastSeparator + 1) + newFileName + \".pdf\";\r\n     // setState(() {\r\n     //   isLoading = true;\r\n     // });\r\n+    print(\"------------->arrived new name----$newPath--------\");\r\n+\r\n     var filename = await files[index].referenceFile!.rename(newPath);\r\n \r\n     print(\"-------------v.path data---------------- ${filename.path}\");\r\n \r\n"
                },
                {
                    "date": 1642487254749,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,9 +10,8 @@\n import 'package:pdfviewer/SQLService/recent_pdf_model.dart';\r\n import 'package:pdfviewer/SQLService/sqlService.dart';\r\n import 'package:pdfviewer/model/pdf_list_model.dart';\r\n import 'package:pdfviewer/service/singing_character_enum.dart';\r\n-import 'package:provider/provider.dart';\r\n \r\n class PdfFileService with ChangeNotifier {\r\n   // List starPDF = [];\r\n   bool isDeleted = false;\r\n@@ -322,11 +321,9 @@\n     var temp1 = files[index].referenceFile!.path;\r\n \r\n     var lastSeparator = temp1.lastIndexOf(Platform.pathSeparator);\r\n     var newPath = temp1.substring(0, lastSeparator + 1) + newFileName + \".pdf\";\r\n-    // setState(() {\r\n-    //   isLoading = true;\r\n-    // });\r\n+\r\n     print(\"------------->arrived new name----$newPath--------\");\r\n \r\n     var filename = await files[index].referenceFile!.rename(newPath);\r\n \r\n@@ -345,9 +342,6 @@\n       SnackBar(\r\n         content: Text(\"Renamed to  ${newFileName}\"),\r\n       ),\r\n     );\r\n-    // setState(() {\r\n-    //   isLoading = false;\r\n-    // });\r\n   }\r\n }\r\n"
                },
                {
                    "date": 1642488082602,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -336,12 +336,12 @@\n \r\n     getStorageFilleMethod();\r\n     notifyListeners();\r\n     // Navigator.pop(context);\r\n-    ScaffoldMessenger.of(context).clearSnackBars();\r\n-    ScaffoldMessenger.of(context).showSnackBar(\r\n-      SnackBar(\r\n-        content: Text(\"Renamed to  ${newFileName}\"),\r\n-      ),\r\n-    );\r\n+    // ScaffoldMessenger.of(context).clearSnackBars();\r\n+    // ScaffoldMessenger.of(context).showSnackBar(\r\n+    //   SnackBar(\r\n+    //     content: Text(\"Renamed to  ${newFileName}\"),\r\n+    //   ),\r\n+    // );\r\n   }\r\n }\r\n"
                },
                {
                    "date": 1642491802351,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -212,9 +212,24 @@\n       print(e);\r\n       return false;\r\n     }\r\n   }\r\n+ deleteMethod() {\r\n+   \r\n+    removeFromFavoritePdfList(\r\n+        fileName, SqlModel.tableFavorite);\r\n+    removeFromRecentPdfList(fileName, SqlModel.tableRecent);\r\n \r\n+    deleteFile(\r\n+      File(\r\n+        fileName,\r\n+      ),\r\n+    )\r\n+      \r\n+    });\r\n+\r\n+    // );\r\n+  }\r\n   Future<void> deleteFile(File file) async {\r\n     try {\r\n       if (await file.exists()) {\r\n         await file.delete();\r\n"
                },
                {
                    "date": 1642492045108,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -212,24 +212,9 @@\n       print(e);\r\n       return false;\r\n     }\r\n   }\r\n- deleteMethod() {\r\n-   \r\n-    removeFromFavoritePdfList(\r\n-        fileName, SqlModel.tableFavorite);\r\n-    removeFromRecentPdfList(fileName, SqlModel.tableRecent);\r\n \r\n-    deleteFile(\r\n-      File(\r\n-        fileName,\r\n-      ),\r\n-    )\r\n-      \r\n-    });\r\n-\r\n-    // );\r\n-  }\r\n   Future<void> deleteFile(File file) async {\r\n     try {\r\n       if (await file.exists()) {\r\n         await file.delete();\r\n"
                },
                {
                    "date": 1642492730835,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -213,8 +213,20 @@\n       return false;\r\n     }\r\n   }\r\n \r\n+  deleteMethod(String fileName) {\r\n+    removeFromFavoritePdfList(fileName, SqlModel.tableFavorite);\r\n+    removeFromRecentPdfList(fileName, SqlModel.tableRecent);\r\n+    deleteFile(\r\n+      File(\r\n+        fileName,\r\n+      ),\r\n+    );\r\n+\r\n+    // );\r\n+  }\r\n+\r\n   Future<void> deleteFile(File file) async {\r\n     try {\r\n       if (await file.exists()) {\r\n         await file.delete();\r\n"
                },
                {
                    "date": 1642493042617,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -221,10 +221,8 @@\n       File(\r\n         fileName,\r\n       ),\r\n     );\r\n-\r\n-    // );\r\n   }\r\n \r\n   Future<void> deleteFile(File file) async {\r\n     try {\r\n"
                },
                {
                    "date": 1642493219752,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -345,13 +345,6 @@\n     files[index].pdfname = filename.path.split('/').last;\r\n \r\n     getStorageFilleMethod();\r\n     notifyListeners();\r\n-    // Navigator.pop(context);\r\n-    // ScaffoldMessenger.of(context).clearSnackBars();\r\n-    // ScaffoldMessenger.of(context).showSnackBar(\r\n-    //   SnackBar(\r\n-    //     content: Text(\"Renamed to  ${newFileName}\"),\r\n-    //   ),\r\n-    // );\r\n   }\r\n }\r\n"
                },
                {
                    "date": 1642493235163,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -344,7 +344,7 @@\n \r\n     files[index].pdfname = filename.path.split('/').last;\r\n \r\n     getStorageFilleMethod();\r\n-    notifyListeners();\r\n+    // notifyListeners();\r\n   }\r\n }\r\n"
                },
                {
                    "date": 1642493258241,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -344,7 +344,6 @@\n \r\n     files[index].pdfname = filename.path.split('/').last;\r\n \r\n     getStorageFilleMethod();\r\n-    // notifyListeners();\r\n   }\r\n }\r\n"
                },
                {
                    "date": 1642493479224,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -344,6 +344,7 @@\n \r\n     files[index].pdfname = filename.path.split('/').last;\r\n \r\n     getStorageFilleMethod();\r\n+    notifyListeners();\r\n   }\r\n }\r\n"
                },
                {
                    "date": 1642497472700,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -342,9 +342,10 @@\n     files[index].referenceFile = filename;\r\n     files[index].pdfpath = filename.path;\r\n \r\n     files[index].pdfname = filename.path.split('/').last;\r\n-\r\n+    getFavoritePdfList();\r\n+    getRecentPdfList();\r\n     getStorageFilleMethod();\r\n     notifyListeners();\r\n   }\r\n }\r\n"
                },
                {
                    "date": 1642497612162,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -342,10 +342,9 @@\n     files[index].referenceFile = filename;\r\n     files[index].pdfpath = filename.path;\r\n \r\n     files[index].pdfname = filename.path.split('/').last;\r\n-    getFavoritePdfList();\r\n-    getRecentPdfList();\r\n+\r\n     getStorageFilleMethod();\r\n     notifyListeners();\r\n   }\r\n }\r\n"
                },
                {
                    "date": 1642497767242,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -342,9 +342,11 @@\n     files[index].referenceFile = filename;\r\n     files[index].pdfpath = filename.path;\r\n \r\n     files[index].pdfname = filename.path.split('/').last;\r\n-\r\n+    removeFromFavoritePdfList(\r\n+        files[index].referenceFile, SqlModel.tableFavorite);\r\n+    removeFromRecentPdfList(files[index].referenceFile, SqlModel.tableRecent);\r\n     getStorageFilleMethod();\r\n     notifyListeners();\r\n   }\r\n }\r\n"
                },
                {
                    "date": 1642497883578,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -342,11 +342,9 @@\n     files[index].referenceFile = filename;\r\n     files[index].pdfpath = filename.path;\r\n \r\n     files[index].pdfname = filename.path.split('/').last;\r\n-    removeFromFavoritePdfList(\r\n-        files[index].referenceFile, SqlModel.tableFavorite);\r\n-    removeFromRecentPdfList(files[index].referenceFile, SqlModel.tableRecent);\r\n+\r\n     getStorageFilleMethod();\r\n     notifyListeners();\r\n   }\r\n }\r\n"
                },
                {
                    "date": 1642498161579,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -342,8 +342,11 @@\n     files[index].referenceFile = filename;\r\n     files[index].pdfpath = filename.path;\r\n \r\n     files[index].pdfname = filename.path.split('/').last;\r\n+    if (favoritePdfList.contains(files[index].referenceFile)) {\r\n+      print('-----------------im in--------------');\r\n+    }\r\n \r\n     getStorageFilleMethod();\r\n     notifyListeners();\r\n   }\r\n"
                },
                {
                    "date": 1642498524768,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -344,8 +344,11 @@\n \r\n     files[index].pdfname = filename.path.split('/').last;\r\n     if (favoritePdfList.contains(files[index].referenceFile)) {\r\n       print('-----------------im in--------------');\r\n+      removeFromFavoritePdfList(\r\n+          files[index].referenceFile!.path, SqlModel.tableFavorite);\r\n+      insertIntoFavoritePdfList(filename.path, SqlModel.tableFavorite);\r\n     }\r\n \r\n     getStorageFilleMethod();\r\n     notifyListeners();\r\n"
                },
                {
                    "date": 1642498595749,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -342,9 +342,9 @@\n     files[index].referenceFile = filename;\r\n     files[index].pdfpath = filename.path;\r\n \r\n     files[index].pdfname = filename.path.split('/').last;\r\n-    if (favoritePdfList.contains(files[index].referenceFile)) {\r\n+    if (favoritePdfList.contains(files[index].referenceFile!.path)) {\r\n       print('-----------------im in--------------');\r\n       removeFromFavoritePdfList(\r\n           files[index].referenceFile!.path, SqlModel.tableFavorite);\r\n       insertIntoFavoritePdfList(filename.path, SqlModel.tableFavorite);\r\n"
                },
                {
                    "date": 1642498654678,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -346,9 +346,10 @@\n     if (favoritePdfList.contains(files[index].referenceFile!.path)) {\r\n       print('-----------------im in--------------');\r\n       removeFromFavoritePdfList(\r\n           files[index].referenceFile!.path, SqlModel.tableFavorite);\r\n-      insertIntoFavoritePdfList(filename.path, SqlModel.tableFavorite);\r\n+      insertIntoFavoritePdfList(\r\n+          files[index].pdfpath.toString(), SqlModel.tableFavorite);\r\n     }\r\n \r\n     getStorageFilleMethod();\r\n     notifyListeners();\r\n"
                },
                {
                    "date": 1642498863662,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -342,15 +342,10 @@\n     files[index].referenceFile = filename;\r\n     files[index].pdfpath = filename.path;\r\n \r\n     files[index].pdfname = filename.path.split('/').last;\r\n-    if (favoritePdfList.contains(files[index].referenceFile!.path)) {\r\n-      print('-----------------im in--------------');\r\n-      removeFromFavoritePdfList(\r\n-          files[index].referenceFile!.path, SqlModel.tableFavorite);\r\n-      insertIntoFavoritePdfList(\r\n-          files[index].pdfpath.toString(), SqlModel.tableFavorite);\r\n-    }\r\n+    insertIntoFavoritePdfList(\r\n+        files[index].pdfpath.toString(), SqlModel.tableFavorite);\r\n \r\n     getStorageFilleMethod();\r\n     notifyListeners();\r\n   }\r\n"
                },
                {
                    "date": 1642499029129,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -342,10 +342,15 @@\n     files[index].referenceFile = filename;\r\n     files[index].pdfpath = filename.path;\r\n \r\n     files[index].pdfname = filename.path.split('/').last;\r\n-    insertIntoFavoritePdfList(\r\n-        files[index].pdfpath.toString(), SqlModel.tableFavorite);\r\n+    if (favoritePdfList.contains(temp1)) {\r\n+      print('-----------------im in--------------');\r\n+      removeFromFavoritePdfList(\r\n+          files[index].referenceFile!.path, SqlModel.tableFavorite);\r\n+      insertIntoFavoritePdfList(\r\n+          files[index].pdfpath.toString(), SqlModel.tableFavorite);\r\n+    }\r\n \r\n     getStorageFilleMethod();\r\n     notifyListeners();\r\n   }\r\n"
                },
                {
                    "date": 1642499486083,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -344,12 +344,10 @@\n \r\n     files[index].pdfname = filename.path.split('/').last;\r\n     if (favoritePdfList.contains(temp1)) {\r\n       print('-----------------im in--------------');\r\n-      removeFromFavoritePdfList(\r\n-          files[index].referenceFile!.path, SqlModel.tableFavorite);\r\n-      insertIntoFavoritePdfList(\r\n-          files[index].pdfpath.toString(), SqlModel.tableFavorite);\r\n+      removeFromFavoritePdfList(temp1, SqlModel.tableFavorite);\r\n+      insertIntoFavoritePdfList(newPath, SqlModel.tableFavorite);\r\n     }\r\n \r\n     getStorageFilleMethod();\r\n     notifyListeners();\r\n"
                },
                {
                    "date": 1642499825562,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -337,13 +337,15 @@\n \r\n     var filename = await files[index].referenceFile!.rename(newPath);\r\n \r\n     print(\"-------------v.path data---------------- ${filename.path}\");\r\n+    print(\"-------------v.path data---------------- ${favo}\");\r\n \r\n     files[index].referenceFile = filename;\r\n     files[index].pdfpath = filename.path;\r\n \r\n     files[index].pdfname = filename.path.split('/').last;\r\n+\r\n     if (favoritePdfList.contains(temp1)) {\r\n       print('-----------------im in--------------');\r\n       removeFromFavoritePdfList(temp1, SqlModel.tableFavorite);\r\n       insertIntoFavoritePdfList(newPath, SqlModel.tableFavorite);\r\n"
                },
                {
                    "date": 1642499837365,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -337,9 +337,9 @@\n \r\n     var filename = await files[index].referenceFile!.rename(newPath);\r\n \r\n     print(\"-------------v.path data---------------- ${filename.path}\");\r\n-    print(\"-------------v.path data---------------- ${favo}\");\r\n+    print(\"-------------v.path data---------------- ${favoritePdfList}\");\r\n \r\n     files[index].referenceFile = filename;\r\n     files[index].pdfpath = filename.path;\r\n \r\n"
                },
                {
                    "date": 1642500252712,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -344,9 +344,12 @@\n     files[index].pdfpath = filename.path;\r\n \r\n     files[index].pdfname = filename.path.split('/').last;\r\n \r\n-    if (favoritePdfList.contains(temp1)) {\r\n+    bool renameFavCheck =\r\n+        favoritePdfList.where((element) => element.pdfpath == temp1).isNotEmpty;\r\n+\r\n+    if (renameFavCheck == true) {\r\n       print('-----------------im in--------------');\r\n       removeFromFavoritePdfList(temp1, SqlModel.tableFavorite);\r\n       insertIntoFavoritePdfList(newPath, SqlModel.tableFavorite);\r\n     }\r\n"
                },
                {
                    "date": 1642500949949,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,8 +7,9 @@\n import 'package:intl/intl.dart';\r\n import 'package:path_provider_extention/path_provider_extention.dart';\r\n import 'package:pdfviewer/SQLService/favorite_pdf_model.dart';\r\n import 'package:pdfviewer/SQLService/recent_pdf_model.dart';\r\n+import 'package:pdfviewer/SQLService/recent_pdf_service.dart';\r\n import 'package:pdfviewer/SQLService/sqlService.dart';\r\n import 'package:pdfviewer/model/pdf_list_model.dart';\r\n import 'package:pdfviewer/service/singing_character_enum.dart';\r\n \r\n@@ -346,15 +347,28 @@\n     files[index].pdfname = filename.path.split('/').last;\r\n \r\n     bool renameFavCheck =\r\n         favoritePdfList.where((element) => element.pdfpath == temp1).isNotEmpty;\r\n-\r\n+    bool renameRecentCheck =\r\n+        recentPdfList.where((element) => element.pdfpath == temp1).isNotEmpty;\r\n     if (renameFavCheck == true) {\r\n       print('-----------------im in--------------');\r\n       removeFromFavoritePdfList(temp1, SqlModel.tableFavorite);\r\n       insertIntoFavoritePdfList(newPath, SqlModel.tableFavorite);\r\n     }\r\n+    if (renameRecentCheck == true) {\r\n+      print('-----------------im in--------------');\r\n+      removeFromRecentPdfList(temp1, SqlModel.tableRecent);\r\n+      Map<String, Object> data = {\r\n+        'recentpdf': (newPath),\r\n+      };\r\n \r\n+      RecentSQLPDFService().insertRecentPDF(data, SqlModel.tableRecent);\r\n+\r\n+      getRecentPdfList();\r\n+\r\n+      print(\"pdfname is--------------> $data\");\r\n+    }\r\n     getStorageFilleMethod();\r\n     notifyListeners();\r\n   }\r\n }\r\n"
                },
                {
                    "date": 1642500956126,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -363,9 +363,9 @@\n       };\r\n \r\n       RecentSQLPDFService().insertRecentPDF(data, SqlModel.tableRecent);\r\n \r\n-      getRecentPdfList();\r\n+      // getRecentPdfList();\r\n \r\n       print(\"pdfname is--------------> $data\");\r\n     }\r\n     getStorageFilleMethod();\r\n"
                },
                {
                    "date": 1642501143795,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -362,12 +362,8 @@\n         'recentpdf': (newPath),\r\n       };\r\n \r\n       RecentSQLPDFService().insertRecentPDF(data, SqlModel.tableRecent);\r\n-\r\n-      // getRecentPdfList();\r\n-\r\n-      print(\"pdfname is--------------> $data\");\r\n     }\r\n     getStorageFilleMethod();\r\n     notifyListeners();\r\n   }\r\n"
                },
                {
                    "date": 1642501250596,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -347,15 +347,16 @@\n     files[index].pdfname = filename.path.split('/').last;\r\n \r\n     bool renameFavCheck =\r\n         favoritePdfList.where((element) => element.pdfpath == temp1).isNotEmpty;\r\n-    bool renameRecentCheck =\r\n-        recentPdfList.where((element) => element.pdfpath == temp1).isNotEmpty;\r\n+\r\n     if (renameFavCheck == true) {\r\n       print('-----------------im in--------------');\r\n       removeFromFavoritePdfList(temp1, SqlModel.tableFavorite);\r\n       insertIntoFavoritePdfList(newPath, SqlModel.tableFavorite);\r\n     }\r\n+    bool renameRecentCheck =\r\n+        recentPdfList.where((element) => element.pdfpath == temp1).isNotEmpty;\r\n     if (renameRecentCheck == true) {\r\n       print('-----------------im in--------------');\r\n       removeFromRecentPdfList(temp1, SqlModel.tableRecent);\r\n       Map<String, Object> data = {\r\n"
                },
                {
                    "date": 1642501258527,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -355,8 +355,9 @@\n       insertIntoFavoritePdfList(newPath, SqlModel.tableFavorite);\r\n     }\r\n     bool renameRecentCheck =\r\n         recentPdfList.where((element) => element.pdfpath == temp1).isNotEmpty;\r\n+\r\n     if (renameRecentCheck == true) {\r\n       print('-----------------im in--------------');\r\n       removeFromRecentPdfList(temp1, SqlModel.tableRecent);\r\n       Map<String, Object> data = {\r\n"
                },
                {
                    "date": 1642501340244,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -349,17 +349,15 @@\n     bool renameFavCheck =\r\n         favoritePdfList.where((element) => element.pdfpath == temp1).isNotEmpty;\r\n \r\n     if (renameFavCheck == true) {\r\n-      print('-----------------im in--------------');\r\n       removeFromFavoritePdfList(temp1, SqlModel.tableFavorite);\r\n       insertIntoFavoritePdfList(newPath, SqlModel.tableFavorite);\r\n     }\r\n     bool renameRecentCheck =\r\n         recentPdfList.where((element) => element.pdfpath == temp1).isNotEmpty;\r\n \r\n     if (renameRecentCheck == true) {\r\n-      print('-----------------im in--------------');\r\n       removeFromRecentPdfList(temp1, SqlModel.tableRecent);\r\n       Map<String, Object> data = {\r\n         'recentpdf': (newPath),\r\n       };\r\n"
                },
                {
                    "date": 1642501704327,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -352,8 +352,9 @@\n     if (renameFavCheck == true) {\r\n       removeFromFavoritePdfList(temp1, SqlModel.tableFavorite);\r\n       insertIntoFavoritePdfList(newPath, SqlModel.tableFavorite);\r\n     }\r\n+\r\n     bool renameRecentCheck =\r\n         recentPdfList.where((element) => element.pdfpath == temp1).isNotEmpty;\r\n \r\n     if (renameRecentCheck == true) {\r\n"
                },
                {
                    "date": 1642501928221,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -332,16 +332,10 @@\n     var temp1 = files[index].referenceFile!.path;\r\n \r\n     var lastSeparator = temp1.lastIndexOf(Platform.pathSeparator);\r\n     var newPath = temp1.substring(0, lastSeparator + 1) + newFileName + \".pdf\";\r\n-\r\n-    print(\"------------->arrived new name----$newPath--------\");\r\n-\r\n     var filename = await files[index].referenceFile!.rename(newPath);\r\n \r\n-    print(\"-------------v.path data---------------- ${filename.path}\");\r\n-    print(\"-------------v.path data---------------- ${favoritePdfList}\");\r\n-\r\n     files[index].referenceFile = filename;\r\n     files[index].pdfpath = filename.path;\r\n \r\n     files[index].pdfname = filename.path.split('/').last;\r\n"
                },
                {
                    "date": 1642505003958,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -358,8 +358,9 @@\n       };\r\n \r\n       RecentSQLPDFService().insertRecentPDF(data, SqlModel.tableRecent);\r\n     }\r\n+    getRecentPdfList()\r\n     getStorageFilleMethod();\r\n     notifyListeners();\r\n   }\r\n }\r\n"
                },
                {
                    "date": 1642564233843,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -326,9 +326,9 @@\n     //update the UI\r\n   }\r\n \r\n   changeFileNameOnly(\r\n-      BuildContext context, String newFileName, int index) async {\r\n+      BuildContext context, String newFileName, var index) async {\r\n     print(\"------------->arrived new name----$newFileName--------\");\r\n     var temp1 = files[index].referenceFile!.path;\r\n \r\n     var lastSeparator = temp1.lastIndexOf(Platform.pathSeparator);\r\n@@ -358,9 +358,9 @@\n       };\r\n \r\n       RecentSQLPDFService().insertRecentPDF(data, SqlModel.tableRecent);\r\n     }\r\n-    getRecentPdfList()\r\n+    getRecentPdfList();\r\n     getStorageFilleMethod();\r\n     notifyListeners();\r\n   }\r\n }\r\n"
                },
                {
                    "date": 1642570131954,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,9 +10,9 @@\n import 'package:pdfviewer/SQLService/recent_pdf_model.dart';\r\n import 'package:pdfviewer/SQLService/recent_pdf_service.dart';\r\n import 'package:pdfviewer/SQLService/sqlService.dart';\r\n import 'package:pdfviewer/model/pdf_list_model.dart';\r\n-import 'package:pdfviewer/service/singing_character_enum.dart';\r\n+import 'package:pdfviewer/service/sorting_enum.dart';\r\n \r\n class PdfFileService with ChangeNotifier {\r\n   // List starPDF = [];\r\n   bool isDeleted = false;\r\n"
                }
            ],
            "date": 1642393868052,
            "name": "Commit-0",
            "content": "import 'dart:convert';\r\nimport 'dart:io';\r\n\r\nimport 'package:flutter/cupertino.dart';\r\nimport 'package:flutter/material.dart';\r\nimport 'package:flutter_file_manager/flutter_file_manager.dart';\r\nimport 'package:intl/intl.dart';\r\nimport 'package:path_provider_extention/path_provider_extention.dart';\r\nimport 'package:pdfviewer/SQLService/favorite_pdf_model.dart';\r\nimport 'package:pdfviewer/SQLService/recent_pdf_model.dart';\r\nimport 'package:pdfviewer/SQLService/sqlService.dart';\r\nimport 'package:pdfviewer/model/pdf_list_model.dart';\r\nimport 'package:pdfviewer/service/singing_character_enum.dart';\r\n\r\nclass PdfFileService with ChangeNotifier {\r\n  // List starPDF = [];\r\n  bool isDeleted = false;\r\n  bool isNameSort = false;\r\n  bool isDateSort = false;\r\n  bool isSizeAccending = false;\r\n  bool isSizeDeccending = false;\r\n  bool isReverseSized = false;\r\n  Sortingenum? _character;\r\n\r\n  // List<RecentListPdfModel> recentPdfList = [];\r\n  List<PdfListModel> items = [];\r\n\r\n  List<PdfListModel> favoritePdfList = [];\r\n  List<PdfListModel> files = [];\r\n  List<PdfListModel> recentPdfList = [];\r\n\r\n  Future getRecentPdfList() async {\r\n    final dbClient = await SqlModel().db;\r\n\r\n    List<Map<String, Object?>> futurePDFList = await dbClient.rawQuery(\r\n      \"Select *from ${SqlModel.tableRecent}  order by auto_id DESC\",\r\n    );\r\n\r\n    var tempValue = recentListPdfModelFromJson(jsonEncode(futurePDFList));\r\n    print(tempValue);\r\n    recentPdfList = [];\r\n\r\n    for (var file in tempValue) {\r\n      File filePath = File(file.recentpdf.toString());\r\n      var pdfname = filePath.path.split('/').last;\r\n\r\n      var lastModDate1 = filePath.lastModifiedSync();\r\n      var formattedDate1 = DateFormat('EEE, M/d/y').format(lastModDate1);\r\n\r\n      var finalFileSize = filePath.lengthSync();\r\n      var sizeInKb = (finalFileSize / (1024)).toStringAsFixed(2);\r\n      var pdfmodel = PdfListModel(\r\n          referenceFile: filePath,\r\n          pdfname: pdfname,\r\n          date: formattedDate1,\r\n          size: sizeInKb,\r\n          pdfpath: filePath.path,\r\n          isFav: favoritePdfList\r\n              .where((element) => element.pdfpath == filePath)\r\n              .isNotEmpty);\r\n\r\n      recentPdfList.add(pdfmodel);\r\n    }\r\n\r\n    notifyListeners();\r\n  }\r\n\r\n  Future getFavoritePdfList() async {\r\n    final dbClient = await SqlModel().db;\r\n    List<Map<String, Object?>> futurePDFList = await dbClient.rawQuery(\r\n        \"Select *from ${SqlModel.tableFavorite}   order by auto_id DESC\");\r\n\r\n    var tempValue = favouriteListPdfModelFromJson(jsonEncode(futurePDFList));\r\n    print(tempValue);\r\n    favoritePdfList = [];\r\n    for (var file in tempValue) {\r\n      File filePath = File(file.pdf.toString());\r\n      var pdfname = filePath.path.split('/').last;\r\n\r\n      var lastModDate1 = filePath.lastModifiedSync();\r\n      var formattedDate1 = DateFormat('EEE, M/d/y').format(lastModDate1);\r\n\r\n      var finalFileSize = filePath.lengthSync();\r\n      var sizeInKb = (finalFileSize / (1024)).toStringAsFixed(2);\r\n      var pdfmodel = PdfListModel(\r\n        referenceFile: filePath,\r\n        pdfname: pdfname,\r\n        date: formattedDate1,\r\n        size: sizeInKb,\r\n        pdfpath: filePath.path,\r\n        isFav: favoritePdfList\r\n            .where((element) => element.pdfpath == filePath)\r\n            .isNotEmpty,\r\n      );\r\n\r\n      favoritePdfList.add(pdfmodel);\r\n    }\r\n    notifyListeners();\r\n  }\r\n\r\n  Future<bool> removeFromRecentPdfList(arriveDataRecent, String table) async {\r\n    final dbClientremoveFromRecentPdfList = await SqlModel().db;\r\n    try {\r\n      var resultremoveFromRecentPdfList =\r\n          await dbClientremoveFromRecentPdfList.rawQuery(\r\n        'DELETE FROM $table WHERE recentpdf = ?',\r\n        [arriveDataRecent],\r\n      );\r\n      print(\"deleted in recent index $resultremoveFromRecentPdfList\");\r\n      getRecentPdfList();\r\n      notifyListeners();\r\n\r\n      return true;\r\n    } catch (e) {\r\n      print(e);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  Future<bool> removeFromFavoritePdfList(arrivdata, String table) async {\r\n    print(\"-----------remove from favorite called------------\");\r\n    final dbClientRemoveFromFavorite = await SqlModel().db;\r\n    try {\r\n      var resultRemoveFromFav = await dbClientRemoveFromFavorite.rawQuery(\r\n        'DELETE FROM $table WHERE pdf = ?',\r\n        [arrivdata],\r\n      ).whenComplete(() {\r\n        getFavoritePdfList();\r\n        notifyListeners();\r\n      });\r\n      print(\r\n          \"-----------------------------deleted index $resultRemoveFromFav--------------------------\");\r\n      // getFavoritePdfList();\r\n      return true;\r\n    } catch (e) {\r\n      print(e);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  Future<bool> clearRecentPdfList(String table) async {\r\n    final dbClientDelete = await SqlModel().db;\r\n    try {\r\n      var resultDelete = await dbClientDelete.rawQuery(\r\n          \"\"\"DELETE FROM $table\"\"\").whenComplete(() => notifyListeners());\r\n      print(\"deleted result $resultDelete\");\r\n      getRecentPdfList();\r\n      notifyListeners();\r\n\r\n      return true;\r\n    } catch (e) {\r\n      print(e);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  Future<bool> clearFavoritePdfList(String table) async {\r\n    final dbClientDelete = await SqlModel().db;\r\n    try {\r\n      var resultDelete = await dbClientDelete.rawQuery(\r\n          \"\"\"DELETE FROM $table\"\"\").whenComplete(() => notifyListeners());\r\n      print(\"deleted result $resultDelete\");\r\n      getFavoritePdfList();\r\n      // getFavoritePdfList();\r\n      notifyListeners();\r\n      return true;\r\n    } catch (e) {\r\n      print(e);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  Future<bool> insertIntoFavoritePdfList(String pdfPath, table) async {\r\n    final dbClient = await SqlModel().db;\r\n\r\n    var isExist = await _checkrecordExists(pdfPath.toString());\r\n\r\n    if (!isExist) {\r\n      try {\r\n        Map<String, Object> data = {\r\n          'pdf': (pdfPath),\r\n        };\r\n        await dbClient.insert(table, data);\r\n        getFavoritePdfList();\r\n        getRecentPdfList();\r\n        return true;\r\n      } catch (e) {\r\n        // throw \"asd\";\r\n        print(e);\r\n        return false;\r\n      }\r\n    } else {\r\n      throw \"Already added in favorite\";\r\n    }\r\n  }\r\n\r\n  Future<bool> _checkrecordExists(String data) async {\r\n    final dbClient = await SqlModel().db;\r\n\r\n    try {\r\n      var result = await dbClient.rawQuery(\r\n          \"\"\"select *from ${SqlModel.tableFavorite} where pdf= '$data'\"\"\");\r\n\r\n      print(\"result $result\");\r\n\r\n      if (result.isNotEmpty) {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    } catch (e) {\r\n      print(e);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  Future<void> deleteFile(File file) async {\r\n    try {\r\n      if (await file.exists()) {\r\n        await file.delete();\r\n      }\r\n      print(\"-------------------file name ${file}---------------------------\");\r\n      // removeFromFavorite(file, SqlModel.tableFavorite);\r\n      getStorageFilleMethod();\r\n      getFavoritePdfList();\r\n      notifyListeners();\r\n      print(\r\n          \"-----------table favorite ${SqlModel.tableFavorite}--------------\");\r\n    } catch (e) {\r\n      print(e);\r\n    }\r\n  }\r\n\r\n  accendingSort() {\r\n    files.sort(\r\n      (b, a) {\r\n        return b.referenceFile!\r\n            .lengthSync()\r\n            .compareTo(a.referenceFile!.lengthSync());\r\n      },\r\n    );\r\n    notifyListeners();\r\n    return true;\r\n  }\r\n\r\n  deccendingSort() {\r\n    files.sort(\r\n      (a, b) {\r\n        return b.referenceFile!\r\n            .lengthSync()\r\n            .compareTo(a.referenceFile!.lengthSync());\r\n      },\r\n    );\r\n    notifyListeners();\r\n    return true;\r\n  }\r\n\r\n  nameSort() {\r\n    files.sort(\r\n      (a, b) {\r\n        return a.pdfname!.compareTo(b.pdfname!);\r\n      },\r\n    );\r\n    notifyListeners();\r\n    return true;\r\n  }\r\n\r\n  dateSort() {\r\n    files.sort(\r\n      (b, a) {\r\n        return a.referenceFile!\r\n            .lastModifiedSync()\r\n            .compareTo(b.referenceFile!.lastModifiedSync());\r\n      },\r\n    );\r\n    notifyListeners();\r\n    return true;\r\n  }\r\n\r\n  getStorageFilleMethod() async {\r\n    //asyn function to get list of files\r\n    List<StorageInfo> storageInfo = await PathProviderEx.getStorageInfo();\r\n    var root = storageInfo[0]\r\n        .rootDir; //storageInfo[1] for SD card, geting the root directory\r\n    var fm = FileManager(root: Directory(root)); //\r\n    var temmpfiles = await fm.filesTree(\r\n        excludedPaths: [\"/storage/emulated/0/Android\"],\r\n        extensions: [\"pdf\"] //optional, to filter files, list only pdf files\r\n        );\r\n\r\n    files = [];\r\n    for (var file in temmpfiles) {\r\n      var pdfname = file.path.split('/').last;\r\n\r\n      var lastModDate1 = file.lastModifiedSync();\r\n      var formattedDate = DateFormat('EEE, M/d/y').format(lastModDate1);\r\n\r\n      var finalFileSize = file.lengthSync();\r\n      var sizeInKb = (finalFileSize / (1024)).toStringAsFixed(2);\r\n      var pdfmodel = PdfListModel(\r\n        referenceFile: file,\r\n        pdfname: pdfname,\r\n        date: formattedDate,\r\n        size: sizeInKb,\r\n        pdfpath: file.path,\r\n        isFav: favoritePdfList\r\n            .where((element) => element.pdfpath == file.path)\r\n            .isNotEmpty,\r\n      );\r\n      files.add(pdfmodel);\r\n    }\r\n\r\n    notifyListeners();\r\n    print(files);\r\n    //update the UI\r\n  }\r\n}\r\n"
        }
    ]
}