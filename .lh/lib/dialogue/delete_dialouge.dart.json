{
    "sourceFile": "lib/dialogue/delete_dialouge.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 8,
            "patches": [
                {
                    "date": 1642077447320,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1642077659289,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,13 +6,12 @@\n \r\n import 'package:provider/provider.dart';\r\n \r\n class DeleteFileDialouge extends StatefulWidget {\r\n-  final int index;\r\n+  // final int index;\r\n   final String fileName;\r\n \r\n-  DeleteFileDialouge({Key? key, required this.index, required this.fileName})\r\n-      : super(key: key);\r\n+  DeleteFileDialouge({Key? key, required this.fileName}) : super(key: key);\r\n \r\n   @override\r\n   _DeleteFileDialougeState createState() => _DeleteFileDialougeState();\r\n }\r\n"
                },
                {
                    "date": 1642077810087,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,12 +6,13 @@\n \r\n import 'package:provider/provider.dart';\r\n \r\n class DeleteFileDialouge extends StatefulWidget {\r\n-  // final int index;\r\n+  final int index;\r\n   final String fileName;\r\n \r\n-  DeleteFileDialouge({Key? key, required this.fileName}) : super(key: key);\r\n+  DeleteFileDialouge({Key? key, required this.index, required this.fileName})\r\n+      : super(key: key);\r\n \r\n   @override\r\n   _DeleteFileDialougeState createState() => _DeleteFileDialougeState();\r\n }\r\n"
                },
                {
                    "date": 1642393455752,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -98,7 +98,6 @@\n           ],\r\n         );\r\n       },\r\n     );\r\n-    // Navigator.pop(context);\r\n   }\r\n }\r\n"
                },
                {
                    "date": 1642394063310,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -98,6 +98,7 @@\n           ],\r\n         );\r\n       },\r\n     );\r\n+    // Navigator.pop(context);\r\n   }\r\n }\r\n"
                },
                {
                    "date": 1642394456868,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,9 +42,9 @@\n         ),\r\n         TextButton(\r\n           child: isLoading\r\n               ? Center(\r\n-                  child: CircularProgressIndicator(),\r\n+                  child: Text('Loading...'),\r\n                 )\r\n               : Text(\"Continue\"),\r\n           onPressed: () {\r\n             print(\"${widget.fileName.split('/').last}\");\r\n"
                },
                {
                    "date": 1642394585545,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -70,14 +70,14 @@\n         widget.fileName,\r\n       ),\r\n     )\r\n         .whenComplete(() {\r\n+      setState(() {\r\n+        isLoading = false;\r\n+      });\r\n       Navigator.pop(context);\r\n       showAlertDialog(context);\r\n     });\r\n-    setState(() {\r\n-      isLoading = false;\r\n-    });\r\n \r\n     // );\r\n   }\r\n \r\n"
                },
                {
                    "date": 1642394869026,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -63,21 +63,18 @@\n     pdfService.removeFromFavoritePdfList(\r\n         widget.fileName, SqlModel.tableFavorite);\r\n     pdfService.removeFromRecentPdfList(widget.fileName, SqlModel.tableRecent);\r\n \r\n-    pdfService\r\n-        .deleteFile(\r\n+    pdfService.deleteFile(\r\n       File(\r\n         widget.fileName,\r\n       ),\r\n-    )\r\n-        .whenComplete(() {\r\n-      setState(() {\r\n-        isLoading = false;\r\n-      });\r\n-      Navigator.pop(context);\r\n-      showAlertDialog(context);\r\n+    );\r\n+    setState(() {\r\n+      isLoading = false;\r\n     });\r\n+    Navigator.pop(context);\r\n+    showAlertDialog(context);\r\n \r\n     // );\r\n   }\r\n \r\n"
                },
                {
                    "date": 1642394894622,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -63,18 +63,21 @@\n     pdfService.removeFromFavoritePdfList(\r\n         widget.fileName, SqlModel.tableFavorite);\r\n     pdfService.removeFromRecentPdfList(widget.fileName, SqlModel.tableRecent);\r\n \r\n-    pdfService.deleteFile(\r\n+    pdfService\r\n+        .deleteFile(\r\n       File(\r\n         widget.fileName,\r\n       ),\r\n-    );\r\n-    setState(() {\r\n-      isLoading = false;\r\n+    )\r\n+        .whenComplete(() {\r\n+      setState(() {\r\n+        isLoading = false;\r\n+      });\r\n+      Navigator.pop(context);\r\n+      showAlertDialog(context);\r\n     });\r\n-    Navigator.pop(context);\r\n-    showAlertDialog(context);\r\n \r\n     // );\r\n   }\r\n \r\n"
                }
            ],
            "date": 1642077447320,
            "name": "Commit-0",
            "content": "import 'dart:io';\r\n\r\nimport 'package:flutter/material.dart';\r\nimport 'package:pdfviewer/SQLService/sqlService.dart';\r\nimport 'package:pdfviewer/service/pdf_file_service.dart';\r\n\r\nimport 'package:provider/provider.dart';\r\n\r\nclass DeleteFileDialouge extends StatefulWidget {\r\n  final int index;\r\n  final String fileName;\r\n\r\n  DeleteFileDialouge({Key? key, required this.index, required this.fileName})\r\n      : super(key: key);\r\n\r\n  @override\r\n  _DeleteFileDialougeState createState() => _DeleteFileDialougeState();\r\n}\r\n\r\nclass _DeleteFileDialougeState extends State<DeleteFileDialouge> {\r\n  bool isLoading = false;\r\n\r\n  @override\r\n  void initState() {\r\n    super.initState();\r\n  }\r\n\r\n  // set up the AlertDialog\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    // set up the buttons\r\n    return AlertDialog(\r\n      title: Text(\"Alert!\"),\r\n      content:\r\n          Text(\"Would you like to delete ${widget.fileName.split('/').last}\"),\r\n      actions: [\r\n        TextButton(\r\n          child: Text(\"Cancel\"),\r\n          onPressed: () {\r\n            Navigator.pop(context);\r\n          },\r\n        ),\r\n        TextButton(\r\n          child: isLoading\r\n              ? Center(\r\n                  child: CircularProgressIndicator(),\r\n                )\r\n              : Text(\"Continue\"),\r\n          onPressed: () {\r\n            print(\"${widget.fileName.split('/').last}\");\r\n            deleteMethod();\r\n          },\r\n        )\r\n      ],\r\n    );\r\n  }\r\n\r\n  deleteMethod() {\r\n    var pdfService = Provider.of<PdfFileService>(context, listen: false);\r\n    setState(() {\r\n      isLoading = true;\r\n    });\r\n    pdfService.removeFromFavoritePdfList(\r\n        widget.fileName, SqlModel.tableFavorite);\r\n    pdfService.removeFromRecentPdfList(widget.fileName, SqlModel.tableRecent);\r\n\r\n    pdfService\r\n        .deleteFile(\r\n      File(\r\n        widget.fileName,\r\n      ),\r\n    )\r\n        .whenComplete(() {\r\n      Navigator.pop(context);\r\n      showAlertDialog(context);\r\n    });\r\n    setState(() {\r\n      isLoading = false;\r\n    });\r\n\r\n    // );\r\n  }\r\n\r\n  showAlertDialog(BuildContext context) {\r\n    showDialog(\r\n      context: context,\r\n      builder: (BuildContext context) {\r\n        return AlertDialog(\r\n          title: Text(\"Succesfuly deleted\"),\r\n          content: Text(widget.fileName.toString().split('/').last),\r\n          actions: [\r\n            TextButton(\r\n              child: Text(\"OK\"),\r\n              onPressed: () {\r\n                Navigator.pop(context);\r\n              },\r\n            ),\r\n          ],\r\n        );\r\n      },\r\n    );\r\n    // Navigator.pop(context);\r\n  }\r\n}\r\n"
        }
    ]
}